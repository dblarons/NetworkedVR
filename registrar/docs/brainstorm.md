# Brainstorm

## Summary

Write a directory service which is used by peer to peer applications to connect
peers to one another.

## Terms

- Directory service: The hosted application which connects peers to one another
  and keeps track of rooms and the clients within those rooms.

- Room: A group of clients in a single match.

- Client: A player computer that either wishes to join a room or is already in
  one.

## Plan

- Peer first asks for the lobby

- Sent a list of available rooms identified by guid

  - Each room contains the following params:

    - GUID

    - Name

    - Number of players connected

- If an existing room is chosen by the client:

  - Client sends directory service the GUID of the room they have chosen,
    along with their own IP address, port, and unique id

  - Directory service sends the client a list of peers that it should connect
    to

  - Directory service sends all other clients in the room the IP address and
    port of the new client

- If the client creates a new room:

  - Client sends the directory service a new room request

- Keep alive

  - Directory service polls clients periodically (say, every 10 seconds) to make
    sure they are still alive

  - If client does not respond after 3 retries, client is assumed to be dead

  - When client is dead, they are removed from the registry and a notification
    is sent to all other peers to disconnect from the client

## Models

- Room

  - GUID (generated by the directory service)

  - Name (provided by the client that creates the room)

  - List of connected clients

  - Inactive bool?

- Client

  - Unique id (provided by the client)

## TODO

- [ ] Server

  - [X] When client issues list command, server responds with a list of the
  rooms in the database

  - [X] When client issues a create command, server creates a room

    - Client: Create command with a Client object and Room name

  - [ ] When client issues a select command, server broadcasts client's info
  to peers and other peer's info to client

    - Client: Room GUID

    - Server: Peers and Room to asking client; Client to existing peers

- [ ] Client (in Unity / C#)

  - [ ] Client can issue list command and display results (stretch goal)

  - [ ] Client can issue a create command and join the new room

  - [ ] Client can issue a select command and join the existing room
